<mat-card class="uva-device-card mat-elevation-z2">
  <mat-card-header class="uva-device-card-header">
    <div class="uva-device-card-header-container">
      <div class="uva-device-card-header-section uva-device-card-header-details-block">
        <div class="uva-device-type">
          <app-location-presenter [location]="currentLocation" [title]="null"></app-location-presenter>
        </div>
        <div class="uva-device-name">{{ currentLocation.name }}</div>
        <div class="uva-device-details"></div>
      </div>
    </div>
  </mat-card-header>
  <mat-card-content class="uva-device-card-content">
    <div class="uva-device-card-content-container">
      <div class="uva-device-card-content-section">
        <div class="uva-device-card-header-w-control">
          <div class="uva-left">
            <h4>Aggregate Air Quality</h4>
          </div>
          <div class="uva-right">
            <!-- <uva-mode-toggle></uva-mode-toggle> -->
          </div>
        </div>
        <div class="uva-aq-graph-container mat-elevation-z3">
          <div class="uva-aq-total-container">
            <uva-total-aq-graph-cjs [data]="[currentLocation.uvaAirQuality]"></uva-total-aq-graph-cjs>
          </div>
          <div class="uva-aq-component-container">
            <div class="uva-aq-component-graph-row">
              <div class="uva-aq-component-graph-container uva-left">
                <uva-aq-graph measurand="temperature" label="Temperature" [minValue]="temperatureData.minValue"
                  [maxValue]="temperatureData.maxValue" [data]="temperatureData.data" [labels]="temperatureData.labels">
                </uva-aq-graph>
              </div>
              <div class="uva-aq-component-graph-container uva-right">
                <uva-aq-graph measurand="humidity" label="Humidity" [minValue]="humidityData.minValue"
                  [maxValue]="humidityData.maxValue" [data]="humidityData.data" [labels]="humidityData.labels">
                </uva-aq-graph>
              </div>
            </div>
            <div class="uva-aq-component-graph-row">
              <div class="uva-aq-component-graph-container uva-left">
                <uva-aq-graph measurand="voc" label="VOC" [minValue]="vocData.minValue" [maxValue]="vocData.maxValue"
                  [data]="vocData.data" [labels]="vocData.labels"></uva-aq-graph>
              </div>
              <div class="uva-aq-component-graph-container uva-right">
                <uva-aq-graph measurand="occupancy" label="Occupancy" [minValue]="occupancyData.minValue"
                  [maxValue]="occupancyData.maxValue" [data]="occupancyData.data" [labels]="occupancyData.labels">
                </uva-aq-graph>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="uva-device-card-content-container">
      <div class="uva-device-card-content-section">
        <h4>Environmental Events</h4>
        <div class="uva-progress-bar-group mat-elevation-z3">
          <div class="uva-progress-bar-container">
            <span class="uva-progress-bar-label">Handwashing Compliance ({{currentLocation.handwashingCompliance}}%)</span>
            <mat-progress-bar mode="determinate" [value]="currentLocation.handwashingCompliance"></mat-progress-bar>
            <span class="uva-progress-bar-note">Over last 24 hours</span>
          </div>
          <div class="uva-progress-bar-container">
            <span class="uva-progress-bar-label" *ngIf="!currentLocation.uvcTerminalCleaning.active">UVC Terminal Cleaning (Last Cycle: {{currentLocation.uvcTerminalCleaning.lastCycle | date:'short'}})</span>
            <span class="uva-progress-bar-label" *ngIf="currentLocation.uvcTerminalCleaning.active">UVC Terminal Cleaning (Cycle Active)</span>
            <mat-progress-bar mode="{{currentLocation.uvcTerminalCleaning.active ? 'indeterminate' : 'determinate'}}" [value]="getTerminalCleaningCompliancePercentage()"></mat-progress-bar>
            <span class="uva-progress-bar-note">Required every {{currentLocation.uvcTerminalCleaning.complianceDays}} days for this location</span>
            <br>
            <span class="uva-progress-bar-note"><i>Provided by <img src="assets/logos/partners/surfacide/surfacide-logo.png" alt="Surfacide Logo" /></i></span>
          </div>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>